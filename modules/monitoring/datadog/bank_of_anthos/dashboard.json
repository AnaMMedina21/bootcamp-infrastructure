{
  "title":"Group [[GROUP_ID]] Dashboard",
  "description":"Automatically created using the terraform provider. Changes will be lost.",
  "widgets":[
    {
      "id":424731658936064,
      "definition":{
        "type":"note",
        "content":"Additional information & resources:\n\n- [Kubernetes Dashboard](https://app.datadoghq.com/screen/integration/86/kubernetes---overview?tpl_var_scope=group%3A[[GROUP_ID]])\n- [Containers Dashboard](https://app.datadoghq.com/containers?tags=group%3A[[GROUP_ID]])\n- [Logs](https://app.datadoghq.com/logs?query=group%3A[[GROUP_ID]])\n- [Services architecture diagram](https://raw.githubusercontent.com/GoogleCloudPlatform/bank-of-anthos/master/docs/architecture.png)",
        "background_color":"white",
        "font_size":"18",
        "text_align":"left",
        "show_tick":false,
        "tick_pos":"50%",
        "tick_edge":"left"
      }
    },
    {
      "id":3607026526613620,
      "definition":{
        "title":"User logins (frontend)",
        "show_legend":false,
        "legend_layout":"auto",
        "legend_columns":[
          "avg",
          "min",
          "max",
          "value",
          "sum"
        ],
        "type":"timeseries",
        "requests":[
          {
            "formulas":[
              {
                "formula":"query1"
              }
            ],
            "response_format":"timeseries",
            "on_right_yaxis":false,
            "queries":[
              {
                "query":"sum:bank.frontend.logins{group:[[GROUP_ID]]}.as_count().rollup(sum, 60)",
                "data_source":"metrics",
                "name":"query1"
              }
            ],
            "style":{
              "palette":"dog_classic",
              "line_type":"solid",
              "line_width":"normal"
            },
            "display_type":"line"
          }
        ],
        "yaxis":{
          "include_zero":true,
          "scale":"linear",
          "min":"auto",
          "max":"auto"
        },
        "events":[
          {
            "q":"gremlin.team:group_[[GROUP_ID]]"
          }
        ],
        "markers":[
          
        ]
      }
    },
    {
      "id":2937119681100386,
      "definition":{
        "title":"Successful transactions (ledger-writer)",
        "show_legend":false,
        "legend_layout":"auto",
        "legend_columns":[
          "avg",
          "min",
          "max",
          "value",
          "sum"
        ],
        "type":"timeseries",
        "requests":[
          {
            "formulas":[
              {
                "formula":"query1"
              }
            ],
            "response_format":"timeseries",
            "on_right_yaxis":false,
            "queries":[
              {
                "query":"sum:bank.ledgerwriter.transaction_complete{group:[[GROUP_ID]]}.as_count().rollup(sum, 60)",
                "data_source":"metrics",
                "name":"query1"
              }
            ],
            "style":{
              "palette":"dog_classic",
              "line_type":"solid",
              "line_width":"normal"
            },
            "display_type":"line"
          }
        ],
        "yaxis":{
          "include_zero":true,
          "scale":"linear",
          "min":"auto",
          "max":"auto"
        },
        "events":[
          {
            "q":"gremlin.team:group_[[GROUP_ID]]"
          }
        ],
        "markers":[
          
        ]
      }
    },
    {
      "id":2112548770689068,
      "definition":{
        "title":"System Metrics",
        "type":"group",
        "layout_type":"ordered",
        "widgets":[
          {
            "id":6051520793167559,
            "definition":{
              "title":"Active Nodes",
              "type":"check_status",
              "check":"datadog.agent.up",
              "grouping":"cluster",
              "tags":[
                "group:[[GROUP_ID]]"
              ]
            }
          },
          {
            "id":7245997605604425,
            "definition":{
              "title":"Nodes by CPU",
              "type":"hostmap",
              "requests":{
                "fill":{
                  "q":"max:system.cpu.system{group:[[GROUP_ID]]} by {host}"
                }
              },
              "no_metric_hosts":false,
              "no_group_hosts":true,
              "scope":[
                "group:[[GROUP_ID]]"
              ],
              "style":{
                "palette":"green_to_orange",
                "palette_flip":false,
                "fill_min":"3",
                "fill_max":"100"
              }
            }
          },
          {
            "id":1856275834370859,
            "definition":{
              "title":"CPU Usage",
              "show_legend":false,
              "type":"timeseries",
              "requests":[
                {
                  "q":"avg:system.cpu.user{group:[[GROUP_ID]]} by {host}",
                  "style":{
                    "palette":"purple",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"line"
                }
              ],
              "yaxis":{
                "include_zero":true,
                "scale":"linear",
                "min":"auto",
                "max":"auto"
              },
              "events":[
                {
                  "q":"gremlin.team:group_[[GROUP_ID]]"
                }
              ],
              "markers":[
                {
                  "value":"y = 0",
                  "display_type":"error dashed"
                }
              ]
            }
          },
          {
            "id":5283738802616544,
            "definition":{
              "title":"Free memory",
              "show_legend":false,
              "legend_layout":"auto",
              "legend_columns":[
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"query1"
                    }
                  ],
                  "response_format":"timeseries",
                  "queries":[
                    {
                      "query":"avg:system.mem.usable{group:[[GROUP_ID]]} by {host}",
                      "data_source":"metrics",
                      "name":"query1"
                    }
                  ],
                  "style":{
                    "palette":"dog_classic",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"line"
                }
              ],
              "yaxis":{
                "include_zero":true,
                "scale":"linear",
                "min":"auto",
                "max":"auto"
              },
              "events":[
                {
                  "q":"gremlin.team:group_[[GROUP_ID]]"
                }
              ],
              "markers":[
                
              ]
            }
          },
          {
            "id":3716437845234839,
            "definition":{
              "title":"System IO",
              "show_legend":false,
              "type":"timeseries",
              "requests":[
                {
                  "q":"avg:system.io.util{group:[[GROUP_ID]]} by {host}",
                  "style":{
                    "palette":"dog_classic",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"line"
                }
              ],
              "yaxis":{
                "include_zero":true,
                "scale":"linear",
                "min":"auto",
                "max":"auto"
              },
              "events":[
                {
                  "q":"gremlin.team:group_[[GROUP_ID]]"
                }
              ]
            }
          },
          {
            "id":3865939773871699,
            "definition":{
              "title":"Pct Disk Used",
              "show_legend":false,
              "legend_layout":"auto",
              "legend_columns":[
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"100 * (query1 / query2)"
                    }
                  ],
                  "response_format":"timeseries",
                  "queries":[
                    {
                      "query":"avg:system.disk.used{group:[[GROUP_ID]]} by {host}",
                      "data_source":"metrics",
                      "name":"query1"
                    },
                    {
                      "query":"avg:system.disk.total{group:[[GROUP_ID]]} by {host}",
                      "data_source":"metrics",
                      "name":"query2"
                    }
                  ],
                  "style":{
                    "palette":"cool",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"line"
                }
              ],
              "yaxis":{
                "include_zero":true,
                "scale":"linear",
                "min":"auto",
                "max":"auto"
              },
              "events":[
                {
                  "q":"gremlin.team:group_[[GROUP_ID]]"
                }
              ],
              "markers":[
                
              ]
            }
          },
          {
            "id":3109412137780157,
            "definition":{
              "title":"Network Bytes",
              "show_legend":false,
              "type":"timeseries",
              "requests":[
                {
                  "q":"avg:system.net.bytes_sent{group:[[GROUP_ID]]} by {host}",
                  "style":{
                    "palette":"dog_classic",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"line"
                },
                {
                  "q":"avg:system.net.bytes_rcvd{group:[[GROUP_ID]]} by {host}",
                  "style":{
                    "palette":"dog_classic",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"line"
                }
              ],
              "yaxis":{
                "include_zero":true,
                "scale":"linear",
                "min":"auto",
                "max":"auto"
              },
              "events":[
                {
                  "q":"gremlin.team:group_[[GROUP_ID]]"
                }
              ]
            }
          }
        ]
      }
    },
    {
      "id":3575351769817847,
      "definition":{
        "title":"Service Metrics",
        "type":"group",
        "layout_type":"ordered",
        "widgets":[
          {
            "id":8450226344557883,
            "definition":{
              "title":"TCP Response Time per Service",
              "show_legend":false,
              "type":"timeseries",
              "requests":[
                {
                  "q":"avg:network.tcp.response_time{group:[[GROUP_ID]]} by {url}",
                  "style":{
                    "palette":"dog_classic",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"line"
                }
              ],
              "yaxis":{
                "include_zero":true,
                "scale":"log",
                "min":"auto",
                "max":"auto"
              },
              "events":[
                {
                  "q":"gremlin.team:group_[[GROUP_ID]]"
                }
              ]
            }
          },
          {
            "id":3051040020520518,
            "definition":{
              "title":"accounts-db Response Time",
              "type":"query_value",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"query1 * 1000"
                    }
                  ],
                  "conditional_formats":[
                    {
                      "comparator":">=",
                      "palette":"red_on_white",
                      "value":500
                    },
                    {
                      "comparator":">=",
                      "palette":"yellow_on_white",
                      "value":250
                    },
                    {
                      "comparator":">",
                      "palette":"green_on_white",
                      "value":0
                    }
                  ],
                  "response_format":"scalar",
                  "queries":[
                    {
                      "query":"avg:network.tcp.response_time{group:[[GROUP_ID]],instance:accounts-db}",
                      "data_source":"metrics",
                      "name":"query1",
                      "aggregator":"last"
                    }
                  ]
                }
              ],
              "autoscale":false,
              "custom_unit":"ms",
              "text_align":"center",
              "precision":1
            }
          },
          {
            "id":963069413297708,
            "definition":{
              "title":"balance-reader Response Time",
              "type":"query_value",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"query1 * 1000"
                    }
                  ],
                  "conditional_formats":[
                    {
                      "comparator":">=",
                      "palette":"red_on_white",
                      "value":500
                    },
                    {
                      "comparator":">=",
                      "palette":"yellow_on_white",
                      "value":250
                    },
                    {
                      "comparator":">",
                      "palette":"green_on_white",
                      "value":0
                    }
                  ],
                  "response_format":"scalar",
                  "queries":[
                    {
                      "query":"avg:network.tcp.response_time{group:[[GROUP_ID]],instance:balance-reader}",
                      "data_source":"metrics",
                      "name":"query1",
                      "aggregator":"last"
                    }
                  ]
                }
              ],
              "autoscale":false,
              "custom_unit":"ms",
              "text_align":"center",
              "precision":1
            }
          },
          {
            "id":3912433138602544,
            "definition":{
              "title":"contacts Response Time",
              "type":"query_value",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"query1 * 1000"
                    }
                  ],
                  "conditional_formats":[
                    {
                      "comparator":">=",
                      "palette":"red_on_white",
                      "value":500
                    },
                    {
                      "comparator":">=",
                      "palette":"yellow_on_white",
                      "value":250
                    },
                    {
                      "comparator":">",
                      "palette":"green_on_white",
                      "value":0
                    }
                  ],
                  "response_format":"scalar",
                  "queries":[
                    {
                      "query":"avg:network.tcp.response_time{group:[[GROUP_ID]],instance:contacts}",
                      "data_source":"metrics",
                      "name":"query1",
                      "aggregator":"last"
                    }
                  ]
                }
              ],
              "autoscale":false,
              "custom_unit":"ms",
              "text_align":"center",
              "precision":1
            }
          },
          {
            "id":2558035315572097,
            "definition":{
              "title":"frontend Response Time",
              "type":"query_value",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"query1 * 1000"
                    }
                  ],
                  "conditional_formats":[
                    {
                      "comparator":">=",
                      "palette":"red_on_white",
                      "value":500
                    },
                    {
                      "comparator":">=",
                      "palette":"yellow_on_white",
                      "value":250
                    },
                    {
                      "comparator":">",
                      "palette":"green_on_white",
                      "value":0
                    }
                  ],
                  "response_format":"scalar",
                  "queries":[
                    {
                      "query":"avg:network.tcp.response_time{group:[[GROUP_ID]],instance:frontend}",
                      "data_source":"metrics",
                      "name":"query1",
                      "aggregator":"last"
                    }
                  ]
                }
              ],
              "autoscale":false,
              "custom_unit":"ms",
              "text_align":"center",
              "precision":1
            }
          },
          {
            "id":6860283099976008,
            "definition":{
              "title":"ledger-db Response Time",
              "type":"query_value",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"query1 * 1000"
                    }
                  ],
                  "conditional_formats":[
                    {
                      "comparator":">=",
                      "palette":"red_on_white",
                      "value":500
                    },
                    {
                      "comparator":">=",
                      "palette":"yellow_on_white",
                      "value":250
                    },
                    {
                      "comparator":">",
                      "palette":"green_on_white",
                      "value":0
                    }
                  ],
                  "response_format":"scalar",
                  "queries":[
                    {
                      "query":"avg:network.tcp.response_time{group:[[GROUP_ID]],instance:ledger-db}",
                      "data_source":"metrics",
                      "name":"query1",
                      "aggregator":"last"
                    }
                  ]
                }
              ],
              "autoscale":false,
              "custom_unit":"ms",
              "text_align":"center",
              "precision":1
            }
          },
          {
            "id":7183568897722437,
            "definition":{
              "title":"ledger-writer Response Time",
              "type":"query_value",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"query1 * 1000"
                    }
                  ],
                  "conditional_formats":[
                    {
                      "comparator":">=",
                      "palette":"red_on_white",
                      "value":500
                    },
                    {
                      "comparator":">=",
                      "palette":"yellow_on_white",
                      "value":250
                    },
                    {
                      "comparator":">",
                      "palette":"green_on_white",
                      "value":0
                    }
                  ],
                  "response_format":"scalar",
                  "queries":[
                    {
                      "query":"avg:network.tcp.response_time{group:[[GROUP_ID]],instance:ledger-writer}",
                      "data_source":"metrics",
                      "name":"query1",
                      "aggregator":"last"
                    }
                  ]
                }
              ],
              "autoscale":false,
              "custom_unit":"ms",
              "text_align":"center",
              "precision":1
            }
          },
          {
            "id":7294975627404891,
            "definition":{
              "title":"transaction-history Response Time",
              "type":"query_value",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"query1 * 1000"
                    }
                  ],
                  "conditional_formats":[
                    {
                      "comparator":">=",
                      "palette":"red_on_white",
                      "value":500
                    },
                    {
                      "comparator":">=",
                      "palette":"yellow_on_white",
                      "value":250
                    },
                    {
                      "comparator":">",
                      "palette":"green_on_white",
                      "value":0
                    }
                  ],
                  "response_format":"scalar",
                  "queries":[
                    {
                      "query":"avg:network.tcp.response_time{group:[[GROUP_ID]],instance:transaction-history}",
                      "data_source":"metrics",
                      "name":"query1",
                      "aggregator":"last"
                    }
                  ]
                }
              ],
              "autoscale":false,
              "custom_unit":"ms",
              "text_align":"center",
              "precision":1
            }
          },
          {
            "id":7462335384585672,
            "definition":{
              "title":"userservice Response Time",
              "type":"query_value",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"query1 * 1000"
                    }
                  ],
                  "conditional_formats":[
                    {
                      "comparator":">=",
                      "palette":"red_on_white",
                      "value":500
                    },
                    {
                      "comparator":">=",
                      "palette":"yellow_on_white",
                      "value":250
                    },
                    {
                      "comparator":">",
                      "palette":"green_on_white",
                      "value":0
                    }
                  ],
                  "response_format":"scalar",
                  "queries":[
                    {
                      "query":"avg:network.tcp.response_time{group:[[GROUP_ID]],instance:userservice}",
                      "data_source":"metrics",
                      "name":"query1",
                      "aggregator":"last"
                    }
                  ]
                }
              ],
              "autoscale":false,
              "custom_unit":"ms",
              "text_align":"center",
              "precision":1
            }
          }
        ]
      }
    },
    {
      "id":5519685533509571,
      "definition":{
        "title":"Kubernetes Metrics",
        "type":"group",
        "layout_type":"ordered",
        "widgets":[
          {
            "id":3730561971601356,
            "definition":{
              "title":"Pods Running",
              "type":"query_value",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"query1"
                    }
                  ],
                  "response_format":"scalar",
                  "queries":[
                    {
                      "query":"sum:kubernetes.pods.running{group:[[GROUP_ID]]}",
                      "data_source":"metrics",
                      "name":"query1",
                      "aggregator":"avg"
                    }
                  ]
                }
              ],
              "autoscale":true,
              "text_align":"center",
              "precision":0
            }
          },
          {
            "id":3526949109421286,
            "definition":{
              "title":"Container Restarts by Pod",
              "title_size":"16",
              "title_align":"left",
              "show_legend":false,
              "legend_layout":"vertical",
              "legend_columns":[
                "max",
                "value",
                "sum"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "alias":"Restarts",
                      "formula":"query1"
                    }
                  ],
                  "response_format":"timeseries",
                  "on_right_yaxis":false,
                  "queries":[
                    {
                      "query":"sum:kubernetes_state.container.restarts{group:[[GROUP_ID]]} by {pod_name}",
                      "data_source":"metrics",
                      "name":"query1"
                    }
                  ],
                  "style":{
                    "palette":"dog_classic",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"bars"
                }
              ],
              "yaxis":{
                "include_zero":true,
                "scale":"linear",
                "label":"",
                "min":"auto",
                "max":"auto"
              },
              "markers":[
                
              ]
            }
          },
          {
            "id":2398687411132898,
            "definition":{
              "title":"Containers in CrashloopBackOff (by Pod)",
              "title_size":"16",
              "title_align":"left",
              "show_legend":false,
              "legend_layout":"vertical",
              "legend_columns":[
                "avg",
                "max",
                "value"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "alias":"CrashloopBackOff",
                      "formula":"query1"
                    }
                  ],
                  "response_format":"timeseries",
                  "on_right_yaxis":false,
                  "queries":[
                    {
                      "query":"sum:kubernetes.containers.state.waiting{reason:crashloopbackoff,group:[[GROUP_ID]]} by {pod_name}",
                      "data_source":"metrics",
                      "name":"query1"
                    }
                  ],
                  "style":{
                    "palette":"dog_classic",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"bars"
                }
              ],
              "yaxis":{
                "include_zero":true,
                "scale":"linear",
                "label":"",
                "min":"auto",
                "max":"auto"
              },
              "markers":[
                
              ]
            }
          },
          {
            "id":4288511275320326,
            "definition":{
              "title":"CPU % Grouped by Microservices",
              "type":"hostmap",
              "requests":{
                "fill":{
                  "q":"avg:process.stat.container.cpu.total_pct{group:[[GROUP_ID]]} by {host}"
                }
              },
              "node_type":"container",
              "no_metric_hosts":false,
              "no_group_hosts":false,
              "group":[
                "kube_deployment"
              ],
              "scope":[
                "group:[[GROUP_ID]]"
              ],
              "style":{
                "palette":"YlOrRd",
                "palette_flip":false,
                "fill_min":"0",
                "fill_max":"100"
              }
            }
          },
          {
            "id":6307380111819609,
            "definition":{
              "title":"Pods per Node",
              "type":"toplist",
              "requests":[
                {
                  "q":"top(sum:kubernetes.pods.running{group:[[GROUP_ID]]} by {host}, 5, 'last', 'desc')"
                }
              ]
            }
          },
          {
            "id":6040818210867049,
            "definition":{
              "title":"Kubernetes Pods/Containers per Node",
              "type":"hostmap",
              "requests":{
                "fill":{
                  "q":"avg:process.stat.container.cpu.total_pct{group:[[GROUP_ID]]} by {host}"
                }
              },
              "node_type":"container",
              "no_metric_hosts":true,
              "no_group_hosts":true,
              "group":[
                "host"
              ],
              "scope":[
                "group:[[GROUP_ID]]"
              ],
              "style":{
                "palette":"green_to_orange",
                "palette_flip":false
              }
            }
          },
          {
            "id":42606791997821,
            "definition":{
              "title":"Most CPU-intensive pods",
              "type":"toplist",
              "requests":[
                {
                  "q":"top(sum:kubernetes.cpu.usage.total{group:[[GROUP_ID]]} by {pod_name}, 100, 'mean', 'desc')"
                }
              ]
            }
          },
          {
            "id":845416368619323,
            "definition":{
              "title":"Most memory-intensive pods",
              "type":"toplist",
              "requests":[
                {
                  "q":"top(sum:kubernetes.memory.usage{group:[[GROUP_ID]]} by {pod_name}, 50, 'mean', 'desc')"
                }
              ]
            }
          }
        ]
      }
    }
  ],
  "template_variables":[
    
  ],
  "layout_type":"ordered",
  "is_read_only":false,
  "notify_list":[
    
  ],
  "reflow_type":"auto",
  "id":"h4a-a93-x3w"
}
